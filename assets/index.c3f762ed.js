var q=Object.defineProperty,U=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(t,n,s)=>n in t?q(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,S=(t,n)=>{for(var s in n||(n={}))Y.call(n,s)&&M(t,s,n[s]);if(C)for(var s of C(n))A.call(n,s)&&M(t,s,n[s]);return t},T=(t,n)=>U(t,J(n));var R=(t,n)=>{var s={};for(var l in t)Y.call(t,l)&&n.indexOf(l)<0&&(s[l]=t[l]);if(t!=null&&C)for(var l of C(t))n.indexOf(l)<0&&A.call(t,l)&&(s[l]=t[l]);return s};import{r as Q,a as m,h as j,R as e,D as W,T as X,P as Z,F,b as ee,c as te,d as ae,I as P,m as ne,e as _,L as H,G as le,S as V,f as se,g as re,C as O,i as oe,j as ce}from"./vendor.68e8e247.js";const ie=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}};ie();function de(t){const n=t.length,s=[];for(let l=n-1;l>=0;l--){const a=t[l].data?t[l].data[0]:t[l][0];s.push(a)}return s.reverse()}const ue=t=>{Q("element-link",{start:[{trigger:"interval:mouseenter",action:"element-link-by-color:link"}],end:[{trigger:"interval:mouseleave",action:"element-link-by-color:unlink"}]});const n=f=>j(f).format("YYYYMMDD"),[s,l]=m.exports.useState([]),[a,o]=m.exports.useState([]),[p,E]=m.exports.useState(!1);m.exports.useEffect(()=>{window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&E(!0);let f=[],g=[];t.columnData.forEach(h=>{const r=n(h.range.date);let u=0;h.projects.forEach(i=>{u+=i.total_seconds;const y=i.total_seconds/3600;f.push({date:r,projects:i.name,value:y,text:i.text})}),g.push({date:r,total:u/3600})}),l(f),o(g)},[t.columnData]);const d={data:[s,a],isStack:!0,xField:"date",yField:["value","total"],geometryOptions:[{geometry:"column",isStack:!0,seriesField:"projects",scrollbar:{type:"horizontal"},tooltip:{formatter:function(g){let h=j.duration(g.value*3600,"seconds");return{name:g.projects,value:`${j({h:h.hours(),m:h.minutes(),s:h.seconds()}).format("HH:mm:ss")}`}}}},{geometry:"line",tooltip:{formatter:function(g){let h=j.duration(g.total*3600,"seconds");return{name:g.date,value:`Total ${j({h:h.hours(),m:h.minutes(),s:h.seconds()}).format("HH:mm:ss")}`}}}}],slider:{},limitInPlot:!1,padding:[20,20,50,20],meta:{date:{sync:!1}},interactions:[{type:"element-highlight-by-color"},{type:"element-link"}],theme:p?"dark":"",legend:!1};return e.createElement(W,T(S({},d),{onReady:f=>{f.on("plot:click",g=>{const{x:h,y:r}=g;f.options,f.chart.getTooltipItems({x:h,y:r})})}}))},me=t=>{const[n,s]=m.exports.useState({});m.exports.useEffect(()=>{let a=[];t.columnData.forEach(o=>{o.projects.forEach(d=>{a[d.name]?a[d.name].value+=d.total_seconds:a[d.name]={value:d.total_seconds}});let E=[];for(let d in a)E.push({name:d,value:a[d].value});s({name:"root",children:E})})},[t.columnData]);var l={data:n,colorField:"name",tooltip:!1,label:{position:"middle",layout:[{type:"adjust-color"}]}};return e.createElement(X,S({},l))},pe=t=>{const[n,s]=m.exports.useState([]);m.exports.useEffect(()=>{let a=[];t.columnData.forEach(p=>{p.languages.forEach(d=>{a[d.name]?a[d.name].value+=d.total_seconds:a[d.name]={value:d.total_seconds}})});let o=[];for(let p in a)o.push({type:p,value:a[p].value});s(o)},[t.columnData]);var l={appendPadding:10,data:n,angleField:"value",colorField:"type",radius:.8,legend:!1,label:{type:"outer",content:"{name}",layout:[{type:"adjust-color"}]},interactions:[{type:"pie-legend-active"},{type:"element-active"}],tooltip:!1};return e.createElement(Z,S({},l))},{TextArea:fe}=P,ge=d=>{var f=d,{editing:t,dataIndex:n,title:s,inputType:l,record:a,index:o,children:p}=f,E=R(f,["editing","dataIndex","title","inputType","record","index","children"]);const g=l==="moreT"?e.createElement(fe,null):e.createElement(P,null);return e.createElement("td",S({},E),t?e.createElement(F.Item,{name:n,style:{margin:0},rules:[{message:`Please Input ${s}!`}]},g):p)},he=t=>{const[n,s]=m.exports.useState([]),[l]=F.useForm(),[a,o]=m.exports.useState(""),p=r=>r.key===a,E=r=>{console.log("record: ",r),l.setFieldsValue(S({ProjectName:"",projectDetail:"",projectStartTime:"",projectEndTime:""},r)),o(r.key)},d=()=>{o("")},f=async r=>{console.log("key: ",await l.validateFields());try{const u=await l.validateFields();console.log("row: ",u);const i=[...n],y=i.findIndex(k=>r===k.key);if(y>-1){const k=i[y];i.splice(y,1,S(S({},k),u)),s(i),o("")}else i.push(u),s(i),o("")}catch(u){console.log("Validate Failed:",u)}},h=[{title:"projectName",dataIndex:"projectName",width:"15%",editable:!0},{title:"projectDetail",dataIndex:"projectDetail",width:"25%",editable:!0},{title:"projectStartTime",dataIndex:"projectStartTime",width:"20%",editable:!0},{title:"projectEndTime",dataIndex:"projectEndTime",width:"20%",editable:!0},{title:"operation",dataIndex:"operation",render:(r,u)=>p(u)?e.createElement("span",null,e.createElement("a",{href:"javascript:;",onClick:()=>f(u.key),style:{marginRight:8}},"Save"),e.createElement(te,{title:"Sure to cancel?",onConfirm:d},e.createElement("a",null,"Cancel"))):e.createElement(ae.Link,{disabled:a!=="",onClick:()=>E(u)},"Edit")}].map(r=>r.editable?T(S({},r),{onCell:u=>({record:u,inputType:r.dataIndex=="projectDetail"?"moreT":"text",dataIndex:r.dataIndex,title:r.title,editing:p(u)})}):r);return m.exports.useEffect(()=>{let r={},u=[];t.columnData.forEach(i=>{i.projects.forEach(y=>{r[y.name]?r[y.name].timeRange.push(i.range.date):r[y.name]={projectName:y.name,timeRange:[i.range.date]}})});for(let i in r)r[i].projectName!="Unknow Project"&&u.push({key:i,projectName:r[i].projectName,projectDetail:"",projectStartTime:r[i].timeRange[0],projectEndTime:r[i].timeRange[r[i].timeRange.length-1]});s(u)},[t.columnData]),e.createElement(F,{form:l,component:!1},e.createElement(ee,{components:{body:{cell:ge}},bordered:!0,columns:h,rowClassName:"editable-row",dataSource:n,pagination:!1}))},{Header:Ee,Content:ye,Footer:ve}=H,{Option:xe}=V,{Search:De}=P,{RangePicker:be}=oe;function Se(){const t=[{value:7,label:"Last 7 Days"},{value:14,label:"Last 14 Days"},{value:30,label:"Last 30 Days"},{value:90,label:"Last 90 Days"},{value:365,label:"Last Year"}],[n,s]=m.exports.useState(7),[l,a]=m.exports.useState(!1),[o,p]=m.exports.useState([]),[E,d]=m.exports.useState(""),[f,g]=m.exports.useState(0),[h,r]=m.exports.useState([]),[u,i]=m.exports.useState(j().format("YYYY-MM-DD"));m.exports.useEffect(()=>{$(),localStorage.getItem("gistId")?d(localStorage.getItem("gistId")):ne.info("Please Enter Yout GistId")},[E,l,u,n]);const y=(c={})=>{const{data:{files:x}}=c,v=Object.keys(x);length=v.length-1;let D;if(l){let b=v.findIndex((N,L,je)=>N.indexOf(u)>-1),w=b-f;D=v.slice(w,b+1)}else{const b=n>=length?0:length-n;D=v.slice(b)}let I=[];return D.forEach(b=>{const{type:w,filename:N,raw_url:L}=x[b]||{};w==="application/json"&&/summaries/.test(N)&&I.push(L)}),I},k=c=>new Promise((x,v)=>{setTimeout(()=>{_.get(`${c}`).then(D=>{x(D)}).catch(D=>{x("error")})},2e3)}),z=c=>{var x=c.map(v=>k(v));return Promise.all(x).then(v=>{let D=[];v.map((b,w)=>{b!="error"&&D.push(b.data)});const I=de(D).reverse();p(I)}).catch(v=>{})},$=()=>{let c=E||localStorage.getItem("gistId");if(c)return _.get(`https://api.github.com/gists/${c}`).then(x=>{const v=y(x);z(v).then(()=>{console.log("done~")})})},G=c=>{c&&(localStorage.setItem("gistId",c),d(c))},K=c=>{s(c)},B=c=>c?c>j():!1;return e.createElement(H,{className:"layout"},e.createElement(Ee,{className:"waka-hd"},e.createElement("a",{href:"https://github.com/fangge/wakatime-dashboardv2",target:"_blank"},e.createElement(le,null),"wakatime-dashboard pro"),e.createElement(De,{align:"center",onSearch:G,allowClear:!0,enterButton:!0,placeholder:"Enter Your Gist Id",className:"gist-input"})),e.createElement(ye,{style:{padding:"0 50px"}},e.createElement("div",{className:"waka-select"},e.createElement(V,{defaultValue:"Last 7 Days",className:"range-select",onChange:K,disabled:l},t.map(c=>e.createElement(xe,{key:c.value,value:c.value},c.label))),e.createElement(se,{size:12},e.createElement(be,{onCalendarChange:c=>{c==null||c[1]==null?a(!1):(a(!0),g(c[1].diff(c[0],"days")),i(c[1].format("YYYY-MM-DD")),r(c))},allowClear:!0,disabledDate:B}))),e.createElement("div",{className:"site-layout-content"},E&&e.createElement("div",{className:"chart-detail"},e.createElement(ue,{columnData:o}),e.createElement(re,null,e.createElement(O,{span:12},e.createElement("h2",null,"General overview of projects time in the interval"),e.createElement(me,{columnData:o})),e.createElement(O,{span:12},e.createElement("h2",null,"Languages"),e.createElement(pe,{columnData:o}))),e.createElement("h2",null,"Range of projects Details"),e.createElement(he,{columnData:o})),!E&&e.createElement("svg",{t:"1623896018865",className:"empty",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2881"},e.createElement("path",{d:"M64 640h64a32 32 0 0 0 0-64h-30.432a412.96 412.96 0 0 1 98.784-238.4l21.344 21.344a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0-45.248l-21.344-21.344A412.992 412.992 0 0 1 480 193.568V224a32 32 0 0 0 64 0v-30.432a412.96 412.96 0 0 1 238.4 98.784l-21.344 21.344a32 32 0 1 0 45.248 45.248l21.344-21.344A412.992 412.992 0 0 1 926.432 576H896a32 32 0 0 0 0 64h64a32 32 0 0 0 32-32c0-127.84-49.888-248.32-140.576-339.392v-0.032l-0.064-0.032A477.984 477.984 0 0 0 512 128C384.16 128 263.68 177.888 172.608 268.576h-0.032l-0.032 0.064A477.984 477.984 0 0 0 32 608a32 32 0 0 0 32 32z",fill:"#5465CF","p-id":"2882"}),e.createElement("path",{d:"M474.88 684.48l-237.888-105.728a32 32 0 1 0-25.984 58.496l237.664 105.44A63.84 63.84 0 0 0 512 800c35.296 0 64-28.704 64-64s-28.704-64-64-64a63.36 63.36 0 0 0-37.12 12.48zM976 736a16 16 0 1 0 0-32h-64a16 16 0 0 0-16 16v128a16 16 0 1 0 32 0V800h48a16 16 0 1 0 0-32H928v-32h48zM48 864h64a16 16 0 1 0 0-32H64v-32h48a16 16 0 1 0 0-32H64v-32h48a16 16 0 1 0 0-32h-64a16 16 0 0 0-16 16v128a16 16 0 0 0 16 16z",fill:"#5465CF","p-id":"2883"})))),e.createElement(ve,{style:{textAlign:"center"}},"Power by"," ",e.createElement("a",{href:"https://github.com/fangge",target:"_blank"},"MrFangge")))}ce.render(e.createElement(e.StrictMode,null,e.createElement(Se,null)),document.getElementById("root"));
